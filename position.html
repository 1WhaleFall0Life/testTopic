<html>
  <head>
    <title>Position</title>
    <style>
      #position {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 50px;
      }
    </style>
  </head>
  <body>
    <div id="position"></div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        getGeoPosition().then(position => {
          document.getElementById('position').innerHTML = `经度：${position.coords.longitude}<br />纬度：${position.coords.latitude}`
        }).catch(err => {
          console.log(err)
        })
      })
      // 获取地理位置
      function getGeoPosition() {
        return new Promise((resolve, reject) => {
          if (navigator && navigator.geolocation) {
            // 需要域名
            navigator.geolocation.getCurrentPosition( // 位置获取成功
              function(position) {
                resolve(position)
              }, // 位置获取失败
              function() {
                resolve({
                  coords: {
                    longitude: '获取失败',
                    latitude: '获取失败'
                  }
                })
              }, {
              // 是否开启高精度模式，开启高精度模式耗时较长
                enableHighAccuracy: false,
                // 超时时间，单位毫秒。默认为infinity
                timeout: 10000
              })
          } else {
            reject('当前浏览器不支持获取地理位置')
          }
        })
      }
    </script>
  </body>
</html>
